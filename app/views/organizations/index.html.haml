- cache(Organization.cache_key(params, search: true, page: true)) do
  %h1 All Organizations
  %div.container-fluid{ style: 'width:95%;margin:auto;'}

    %div.form{ style: 'height:70px;width:285px;'}
      = form_tag '#', method: :get, enforce_utf8: false do
        = hidden_field_tag :per_page, params[:per_page]
        = text_field_tag :search, params[:search], class: 'form-control short-form'
        = submit_tag 'Search', name: nil, class: 'btn btn-default short-form'
    %div.row
    %div.row
      - @organizations.each do |org|
        - cache(org) do
          %div.col-sm-3
            %div.organization
              %div.avatar
                - if org.avatar.file
                  = image_tag org.avatar, class: 'img-responsive'
                - else
                  = image_tag '/default/avatar.jpg', class: 'img-responsive'
              %h3
                = org.name
              %div.org-text
                = raw org.description.to_html
            - if editable?(org, org.organization_members)
              %div{ style: 'position:absolute;right:20px;top:30px;background-color:white;padding:4px;' }
                = link_to 'edit', edit_organization_path(org), class:'edit-button' if editable?(org, org.organization_members)
    %hr
    %div.text-center.form
      = paginate @organizations, theme: 'twitter-bootstrap-3'
      %br
      %span Results:
      = link_to '5', params.merge(per_page: 5)
      = link_to '20', params.merge(per_page: 20)
      = link_to '50', params.merge(per_page: 50)
      = link_to '100', params.merge(per_page: 100)
      = link_to '200', params.merge(per_page: 200)
    %hr