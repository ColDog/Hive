%br
%div.col-md-4
  %div.form
  %h3 User
  = form_for variable, url: url, method: method do |f|
    = f.label 'Name'
    = f.text_field :name, class: 'form-control'
    = f.label 'Email'
    = f.email_field :email, class: 'form-control'
    = f.label 'Phone'
    = f.phone_field :phone, class: 'form-control'
    = f.label 'Account Type'
    = f.phone_field :account_type, class: 'form-control'
    %br
    = f.label 'Currently Active: '
    = f.check_box :current, checked: 'checked', id: 'current'
    %div#currentShow{ style: 'display:none' }
      = f.label 'Inactive on:'
      = f.date_select :inactive_on
    %br
    = f.password_field :password, value: @password, placeholder: 'password', class: 'form-control'
    = f.password_field :password_confirmation, value: @password, placeholder: 'password confirmation', class: 'form-control'
    %br
    = f.submit 'Submit', class: 'btn btn-primary'
- if params[:action] == 'edit'
  %div.col-md-8
    %h4 Supplies
    %div.well
      = form_for :supply_list, url: admin_supply_lists_path, method: :post do |f|
        = f.hidden_field :user_id, value: variable.id
        = f.select :supply_id, options_from_collection_for_select(Supply.all, :id, :name), {}, {class: 'select2 short-form form-control'}
        = f.text_field :name, placeholder: 'name', class: 'form-control short-form'
        = f.text_field :notes, placeholder: 'notes', class: 'form-control short-form'
        = f.submit 'Add', class: 'btn btn-primary'
    %table.table
      %thead
        %tr
          %th Supply Name
          %th Name
          %th Notes
          %th Action
      - @user.supply_lists.each do |list|
        %tr
          %td
            = list.supply.name
          %td
            = list.name
          %td
            = list.notes
          %td
            = link_to 'remove', admin_supply_list_path(list), method: :delete
    %h4 Organization Wide Supplies
    %table.table
      %thead
        %tr
          %th Supply Name
          %th Name
          %th Notes
          %th Organization
      - @user.organization_supplies.each do |list|
        %tr
          %td
            = list.supply.name
          %td
            = list.name
          %td
            = list.notes
          %td
            = list.organization

    %hr
    %h4 Organizations
    %div.well
      = form_for :organization_member, url: admin_organization_members_path, method: :post do |f|
        = f.hidden_field :user_id, value: variable.id
        = f.select :organization_id, options_from_collection_for_select(Organization.all, :id, :name), {}, {class: 'select2 short-form form-control'}
        = f.submit 'Add', class: 'btn btn-primary'
        = f.check_box :account_contact
        = f.label 'Accountant?'
        = f.check_box :admin_contact
        = f.label 'Administrator?'
    %table.table
      %thead
        %tr
          %th Organization Name
          %th Admin Contact
          %th Accountant
          %th Remove
      - variable.organization_members.each do |list|
        %tr
          %td
            = list.organization.name
          %td
            = list.admin_contact
          %td
            = list.account_contact
          %td
            = link_to 'remove', admin_organization_member_path(list), method: :delete
    %hr
    %h4 Administrator?
    %div.well
      - if variable.admin
        %span User is an administrator
        = link_to 'Remove this user from administrators',  admin_admin_path(variable.admin), method: :delete,class: 'btn btn-default btn-sm'
      - else
        %span This user is not currently an administrator
        = form_for :admin, url: admin_admins_path, method: :post do |f|
          = f.hidden_field :user_id, value: variable.id
          = f.submit 'Make this user an administrator', class: 'btn btn-default btn-sm'
:javascript
  $('#current').click(function() {
    if( $(this).is(':checked')) {
      $("#currentShow").hide();
    } else {
      $("#currentShow").show();
    }
  });